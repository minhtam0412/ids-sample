2022-01-17 22:29:07.103 +07:00 [INF] Starting host...
2022-01-17 22:29:07.420 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:29:07.740 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:29:07.745 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:29:07.747 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:29:07.749 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:29:07.761 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:29:07.765 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:29:11.799 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:29:11.815 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:29:11.817 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:29:11.818 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:29:11.822 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:29:11.823 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:29:11.827 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:29:12.128 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:29:12.168 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:29:12.180 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:29:12.191 +07:00 [DBG] Start discovery request
2022-01-17 22:29:15.347 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:29:15.937 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:29:15.940 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:29:15.941 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:29:15.943 +07:00 [DBG] Start key discovery request
2022-01-17 22:29:16.009 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:29:16.014 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:29:16.015 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:29:16.018 +07:00 [DBG] Start authorize request
2022-01-17 22:29:16.023 +07:00 [DBG] No user present in authorize request
2022-01-17 22:29:16.025 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:29:16.603 +07:00 [DBG] webclient found in database: true
2022-01-17 22:29:16.611 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:29:16.626 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:29:16.627 +07:00 [DBG] No PKCE used.
2022-01-17 22:29:16.709 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:29:16.766 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:29:16.791 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:29:16.805 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:29:16.818 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiKZ-iv3EOCaFetlM2Ass_9NwhO5c55PvNydFDtlVhc3gcM4xa16yOZIQGd4w-1Mm6xS5yZNyoxaQZS4Su7qpCcKh9_aN65rGQkImaQpZ4oY6UgXtpy1PgkxacFQMZ8H3tinvtzMr5-M8O9IWNF4eVv5RDCxpEG-YJqQtAy5t2DQ4pef5w04Mg5x8IVkl7SKO0mKnFD8FnrjIu-b_sqmHqcwOGOVfq-ac5qQRteDYxav8sx7N6_sMwD2CZNDzEjet587SMhEvZc1fyLztZbH3nnJ","UiLocales":null,"Nonce":"637780301559893910.MjZmZDhkY2EtNjQxNC00NmRjLWExNTEtNzM2ODkxM2E5YWQ4NDY5ZDQ0NmItYjNjZi00OThlLTkwNjEtODVmN2JjMjA2MGMx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780301559893910.MjZmZDhkY2EtNjQxNC00NmRjLWExNTEtNzM2ODkxM2E5YWQ4NDY5ZDQ0NmItYjNjZi00OThlLTkwNjEtODVmN2JjMjA2MGMx","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiKZ-iv3EOCaFetlM2Ass_9NwhO5c55PvNydFDtlVhc3gcM4xa16yOZIQGd4w-1Mm6xS5yZNyoxaQZS4Su7qpCcKh9_aN65rGQkImaQpZ4oY6UgXtpy1PgkxacFQMZ8H3tinvtzMr5-M8O9IWNF4eVv5RDCxpEG-YJqQtAy5t2DQ4pef5w04Mg5x8IVkl7SKO0mKnFD8FnrjIu-b_sqmHqcwOGOVfq-ac5qQRteDYxav8sx7N6_sMwD2CZNDzEjet587SMhEvZc1fyLztZbH3nnJ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:29:16.841 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:29:16.896 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:29:16.928 +07:00 [DBG] webclient found in database: true
2022-01-17 22:29:16.928 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:29:16.932 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:29:16.933 +07:00 [DBG] No PKCE used.
2022-01-17 22:29:16.937 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:29:16.940 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:29:16.947 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:29:16.949 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:29:16.973 +07:00 [DBG] webclient found in database: true
2022-01-17 22:29:16.974 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:32:06.748 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:32:06.751 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:32:06.752 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:32:06.753 +07:00 [DBG] Start discovery request
2022-01-17 22:32:06.777 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:34:58.305 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:34:58.309 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:34:58.309 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:34:58.314 +07:00 [DBG] Start token request.
2022-01-17 22:34:58.316 +07:00 [DBG] Start client validation
2022-01-17 22:34:58.319 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:34:58.321 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:34:58.325 +07:00 [DBG] client id without secret found
2022-01-17 22:34:58.326 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:34:58.326 +07:00 [DBG] Secret id found: angular_spa
2022-01-17 22:34:58.363 +07:00 [DBG] angular_spa found in database: true
2022-01-17 22:34:58.365 +07:00 [DBG] client configuration validation for client angular_spa succeeded.
2022-01-17 22:34:58.368 +07:00 [DBG] Public Client - skipping secret validation success
2022-01-17 22:34:58.368 +07:00 [DBG] Client validation success
2022-01-17 22:34:58.373 +07:00 [INF] {"ClientId":"angular_spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPODPMK1J:00000001","TimeStamp":"2022-01-17T15:34:58.0000000Z","ProcessId":26724,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:34:58.379 +07:00 [DBG] Start token request validation
2022-01-17 22:34:58.387 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:34:58.390 +07:00 [ERR] Client not authorized for resource owner flow, check the AllowedGrantTypes setting{"client_id":"angular_spa"}, details: {"ClientId":"angular_spa","ClientName":"Angular 4 Client","GrantType":"password","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"angular_spa","scope":"openid profile identity.api test.api"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:34:58.420 +07:00 [INF] {"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"unauthorized_client","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HMEPPODPMK1J:00000001","TimeStamp":"2022-01-17T15:34:58.0000000Z","ProcessId":26724,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-01-17 22:40:30.190 +07:00 [INF] Seeding database...
2022-01-17 22:40:31.128 +07:00 [DBG] ApiScopes already populated
2022-01-17 22:40:31.131 +07:00 [DBG] Clients being populated
2022-01-17 22:40:31.697 +07:00 [DBG] IdentityResources already populated
2022-01-17 22:40:31.700 +07:00 [DBG] ApiResources already populated
2022-01-17 22:40:31.703 +07:00 [INF] Done seeding database.
2022-01-17 22:40:37.472 +07:00 [INF] Starting host...
2022-01-17 22:40:37.670 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:40:37.813 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:40:37.814 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:40:37.814 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:40:37.814 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:40:37.814 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:40:37.815 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:40:40.921 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:40:40.936 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:40:40.937 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:40:40.939 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:40:40.940 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:40:40.944 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:40:40.948 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:40:41.446 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:40:41.460 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:40:41.461 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:40:41.463 +07:00 [DBG] Start discovery request
2022-01-17 22:40:43.643 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:40:43.908 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:40:43.911 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:40:43.911 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:40:43.913 +07:00 [DBG] Start key discovery request
2022-01-17 22:40:43.963 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:40:43.967 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:40:43.968 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:40:43.970 +07:00 [DBG] Start authorize request
2022-01-17 22:40:43.974 +07:00 [DBG] No user present in authorize request
2022-01-17 22:40:43.976 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:40:44.251 +07:00 [DBG] webclient found in database: true
2022-01-17 22:40:44.256 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:40:44.266 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:40:44.267 +07:00 [DBG] No PKCE used.
2022-01-17 22:40:44.318 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:40:44.354 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:40:44.370 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:40:44.379 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:40:44.389 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiJCbt0z8Cvjc-B3RNWbbicUiDJ-Rj9kGqQKORSMd9NfHWjSs5ZF7iRxdCrTLciej5VlHhvNMXrEQ5uK_oXdk6PaAJEKgSgo0OGN7MDUdL-6GlekH9LG_TvwxEyvPOAkQuOSvQWYsD26Lm3IMwPYaiQyDRdJcurAHc3gJp0D2dqY96Z3nqjwIP6T2gutOm0j6tsr2kLW0zHPh6ka0mif3Y4PI5VSGnKNa6PSn87NNjv-JUf1KYwynIoLSQpupcvR78BH5LbY1APMVHKrVOEuQ7FM","UiLocales":null,"Nonce":"637780308439479720.MTdlNjYzMmMtZWM5My00MWJkLWJkZjAtZTFjZDFhMGVlN2QwZjg3ZjA2YzMtOTVmOS00YmZhLTg2YTctMDhlMGM5NmNlNDBj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780308439479720.MTdlNjYzMmMtZWM5My00MWJkLWJkZjAtZTFjZDFhMGVlN2QwZjg3ZjA2YzMtOTVmOS00YmZhLTg2YTctMDhlMGM5NmNlNDBj","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiJCbt0z8Cvjc-B3RNWbbicUiDJ-Rj9kGqQKORSMd9NfHWjSs5ZF7iRxdCrTLciej5VlHhvNMXrEQ5uK_oXdk6PaAJEKgSgo0OGN7MDUdL-6GlekH9LG_TvwxEyvPOAkQuOSvQWYsD26Lm3IMwPYaiQyDRdJcurAHc3gJp0D2dqY96Z3nqjwIP6T2gutOm0j6tsr2kLW0zHPh6ka0mif3Y4PI5VSGnKNa6PSn87NNjv-JUf1KYwynIoLSQpupcvR78BH5LbY1APMVHKrVOEuQ7FM","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:40:44.402 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:40:44.436 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:40:44.456 +07:00 [DBG] webclient found in database: true
2022-01-17 22:40:44.456 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:40:44.457 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:40:44.458 +07:00 [DBG] No PKCE used.
2022-01-17 22:40:44.460 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:40:44.463 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:40:44.465 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:40:44.466 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:40:44.480 +07:00 [DBG] webclient found in database: true
2022-01-17 22:40:44.480 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:41:07.255 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:07.259 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:07.260 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:07.264 +07:00 [DBG] Start token request.
2022-01-17 22:41:07.266 +07:00 [DBG] Start client validation
2022-01-17 22:41:07.268 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:07.269 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:07.273 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:07.275 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:07.300 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:07.301 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:07.309 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:07.310 +07:00 [DBG] Client validation success
2022-01-17 22:41:07.315 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000001","TimeStamp":"2022-01-17T15:41:07.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:07.320 +07:00 [DBG] Start token request validation
2022-01-17 22:41:07.324 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:07.331 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:07.343 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:07.347 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:07.451 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:07.463 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000001","TimeStamp":"2022-01-17T15:41:07.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:07.466 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:07.470 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:07.486 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:07.487 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:07.634 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****ePoA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000001","TimeStamp":"2022-01-17T15:41:07.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:07.639 +07:00 [DBG] Token request success.
2022-01-17 22:41:15.292 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:15.297 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:15.298 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:15.300 +07:00 [DBG] Start token request.
2022-01-17 22:41:15.300 +07:00 [DBG] Start client validation
2022-01-17 22:41:15.301 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:15.301 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:15.302 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:15.303 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:15.329 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:15.330 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:15.332 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:15.333 +07:00 [DBG] Client validation success
2022-01-17 22:41:15.333 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000002","TimeStamp":"2022-01-17T15:41:15.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:15.337 +07:00 [DBG] Start token request validation
2022-01-17 22:41:15.337 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:15.343 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:15.353 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:15.357 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:15.368 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:15.369 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000002","TimeStamp":"2022-01-17T15:41:15.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:15.374 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:15.375 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:15.381 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:15.381 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:15.394 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****E3HA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000002","TimeStamp":"2022-01-17T15:41:15.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:15.398 +07:00 [DBG] Token request success.
2022-01-17 22:41:17.311 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:17.331 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:17.332 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:17.333 +07:00 [DBG] Start token request.
2022-01-17 22:41:17.333 +07:00 [DBG] Start client validation
2022-01-17 22:41:17.336 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:17.336 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:17.337 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:17.337 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:17.362 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:17.363 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:17.364 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:17.364 +07:00 [DBG] Client validation success
2022-01-17 22:41:17.365 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000003","TimeStamp":"2022-01-17T15:41:17.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:17.369 +07:00 [DBG] Start token request validation
2022-01-17 22:41:17.370 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:17.375 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:17.385 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:17.389 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:17.400 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:17.401 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000003","TimeStamp":"2022-01-17T15:41:17.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:17.404 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:17.405 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:17.408 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:17.409 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:17.418 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****tSMA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000003","TimeStamp":"2022-01-17T15:41:17.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:17.422 +07:00 [DBG] Token request success.
2022-01-17 22:41:18.336 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:18.338 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:18.339 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:18.339 +07:00 [DBG] Start token request.
2022-01-17 22:41:18.340 +07:00 [DBG] Start client validation
2022-01-17 22:41:18.340 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:18.341 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:18.342 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:18.342 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:18.359 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:18.362 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:18.363 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:18.363 +07:00 [DBG] Client validation success
2022-01-17 22:41:18.364 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000004","TimeStamp":"2022-01-17T15:41:18.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:18.366 +07:00 [DBG] Start token request validation
2022-01-17 22:41:18.367 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:18.370 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:18.373 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:18.375 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:18.387 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:18.388 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000004","TimeStamp":"2022-01-17T15:41:18.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:18.393 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:18.394 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:18.398 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:18.398 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:18.405 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****Q82w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000004","TimeStamp":"2022-01-17T15:41:18.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:18.412 +07:00 [DBG] Token request success.
2022-01-17 22:41:19.170 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:19.172 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:19.173 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:19.174 +07:00 [DBG] Start token request.
2022-01-17 22:41:19.175 +07:00 [DBG] Start client validation
2022-01-17 22:41:19.175 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:19.176 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:19.177 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:19.177 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:19.190 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:19.190 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:19.191 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:19.192 +07:00 [DBG] Client validation success
2022-01-17 22:41:19.193 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000005","TimeStamp":"2022-01-17T15:41:19.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:19.195 +07:00 [DBG] Start token request validation
2022-01-17 22:41:19.196 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:19.199 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:19.202 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:19.204 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:19.213 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:19.215 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000005","TimeStamp":"2022-01-17T15:41:19.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:19.218 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:19.219 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:19.222 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:19.223 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:19.230 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****-6lg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000005","TimeStamp":"2022-01-17T15:41:19.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:19.235 +07:00 [DBG] Token request success.
2022-01-17 22:41:20.211 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:20.213 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:20.213 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:20.214 +07:00 [DBG] Start token request.
2022-01-17 22:41:20.215 +07:00 [DBG] Start client validation
2022-01-17 22:41:20.215 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:20.216 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:20.217 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:20.217 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:20.229 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:20.229 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:20.230 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:20.231 +07:00 [DBG] Client validation success
2022-01-17 22:41:20.231 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000006","TimeStamp":"2022-01-17T15:41:20.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:20.234 +07:00 [DBG] Start token request validation
2022-01-17 22:41:20.234 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:20.240 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:20.242 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:20.244 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:20.254 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:20.254 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000006","TimeStamp":"2022-01-17T15:41:20.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:20.258 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:20.259 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:20.262 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:20.263 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:20.270 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****sHRA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000006","TimeStamp":"2022-01-17T15:41:20.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:20.274 +07:00 [DBG] Token request success.
2022-01-17 22:41:21.236 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:21.238 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:21.239 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:21.240 +07:00 [DBG] Start token request.
2022-01-17 22:41:21.241 +07:00 [DBG] Start client validation
2022-01-17 22:41:21.241 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:21.242 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:21.243 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:21.243 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:21.255 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:21.256 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:21.257 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:21.257 +07:00 [DBG] Client validation success
2022-01-17 22:41:21.258 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000007","TimeStamp":"2022-01-17T15:41:21.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:21.263 +07:00 [DBG] Start token request validation
2022-01-17 22:41:21.263 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:21.266 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:21.268 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:21.270 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:21.280 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:21.281 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000007","TimeStamp":"2022-01-17T15:41:21.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:21.284 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:21.285 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:21.288 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:21.289 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:21.296 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****YN4w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000007","TimeStamp":"2022-01-17T15:41:21.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:21.299 +07:00 [DBG] Token request success.
2022-01-17 22:41:22.056 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:22.058 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:22.059 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:22.060 +07:00 [DBG] Start token request.
2022-01-17 22:41:22.060 +07:00 [DBG] Start client validation
2022-01-17 22:41:22.061 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:22.061 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:22.062 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:22.062 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:22.080 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:22.084 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:22.085 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:22.086 +07:00 [DBG] Client validation success
2022-01-17 22:41:22.087 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000008","TimeStamp":"2022-01-17T15:41:22.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:22.089 +07:00 [DBG] Start token request validation
2022-01-17 22:41:22.089 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:22.093 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:22.096 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:22.101 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:22.115 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:22.116 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000008","TimeStamp":"2022-01-17T15:41:22.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:22.119 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:22.120 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:22.123 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:22.123 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:22.132 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****QdCw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000008","TimeStamp":"2022-01-17T15:41:22.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:22.136 +07:00 [DBG] Token request success.
2022-01-17 22:41:22.989 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:41:22.991 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:41:22.992 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:41:22.992 +07:00 [DBG] Start token request.
2022-01-17 22:41:22.993 +07:00 [DBG] Start client validation
2022-01-17 22:41:22.993 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:41:22.994 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:41:22.994 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:41:22.995 +07:00 [DBG] Secret id found: postman
2022-01-17 22:41:23.009 +07:00 [DBG] postman found in database: true
2022-01-17 22:41:23.009 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:41:23.010 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:41:23.010 +07:00 [DBG] Client validation success
2022-01-17 22:41:23.011 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000009","TimeStamp":"2022-01-17T15:41:23.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:41:23.013 +07:00 [DBG] Start token request validation
2022-01-17 22:41:23.013 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:41:23.016 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:41:23.020 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:41:23.022 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:41:23.032 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:41:23.033 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000009","TimeStamp":"2022-01-17T15:41:23.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:41:23.036 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:41:23.036 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:41:23.039 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:41:23.040 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:41:23.046 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****7EPw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPPUQV05T6:00000009","TimeStamp":"2022-01-17T15:41:23.0000000Z","ProcessId":21280,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:41:23.053 +07:00 [DBG] Token request success.
2022-01-17 22:41:31.874 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:41:31.876 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:41:31.877 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:41:31.878 +07:00 [DBG] Start discovery request
2022-01-17 22:41:31.892 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:41:44.738 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:41:44.741 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:41:44.742 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:41:44.743 +07:00 [DBG] Start discovery request
2022-01-17 22:41:44.748 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:44:18.290 +07:00 [INF] Seeding database...
2022-01-17 22:44:19.168 +07:00 [DBG] ApiScopes already populated
2022-01-17 22:44:19.172 +07:00 [DBG] Clients being populated
2022-01-17 22:44:19.696 +07:00 [DBG] IdentityResources already populated
2022-01-17 22:44:19.699 +07:00 [DBG] ApiResources already populated
2022-01-17 22:44:19.702 +07:00 [INF] Done seeding database.
2022-01-17 22:44:24.968 +07:00 [INF] Starting host...
2022-01-17 22:44:25.282 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:44:25.512 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:44:25.513 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:44:25.514 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:44:25.514 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:44:25.515 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:44:25.515 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:44:28.573 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:44:28.576 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:44:28.577 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:44:28.577 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:44:28.579 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:44:28.580 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:44:28.581 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:44:28.597 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:44:28.621 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:44:28.630 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:44:28.633 +07:00 [DBG] Start discovery request
2022-01-17 22:44:30.496 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:44:30.738 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:44:30.741 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:44:30.742 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:44:30.743 +07:00 [DBG] Start key discovery request
2022-01-17 22:44:30.801 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:44:30.805 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:44:30.806 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:44:30.808 +07:00 [DBG] Start authorize request
2022-01-17 22:44:30.814 +07:00 [DBG] No user present in authorize request
2022-01-17 22:44:30.815 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:44:31.086 +07:00 [DBG] webclient found in database: true
2022-01-17 22:44:31.091 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:44:31.101 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:44:31.102 +07:00 [DBG] No PKCE used.
2022-01-17 22:44:31.155 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:44:31.192 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:44:31.210 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:44:31.218 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:44:31.228 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiKvmYHunbU3hk7430t8xaMQnTGeaaTtezLu4GDqyN2XlL7q6VCHyqsU1PK3ZEcfsc2y1vfAxVU6p_GMq8YJRAVC9JHSYDiDrf6Dt7v2ZVJjrZDTm3GoNHcdPlv97YxUp6irZcgsHXAg-gOJuRKlMUyws2KlD7xlyEp2cXWx5LyDA-n-__igmNDQp4F8iuJ9OKRfxNpOG4D0UsEdz08YFceZwkYZ9AjiWtlAAjvZZVxv0g6CLhJkJuIXviAB4PgxYAixDibB_SDDq7CxYVyPGNAR","UiLocales":null,"Nonce":"637780310707764108.YTEwMjE4N2ItZjA4OC00Mjc5LTkzYzYtNzVjN2M5MDhmMWMxOWQ3NWJjNjAtNDgxOS00MmIzLWFiNjUtZDc5Njc1YjcwMTll","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780310707764108.YTEwMjE4N2ItZjA4OC00Mjc5LTkzYzYtNzVjN2M5MDhmMWMxOWQ3NWJjNjAtNDgxOS00MmIzLWFiNjUtZDc5Njc1YjcwMTll","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiKvmYHunbU3hk7430t8xaMQnTGeaaTtezLu4GDqyN2XlL7q6VCHyqsU1PK3ZEcfsc2y1vfAxVU6p_GMq8YJRAVC9JHSYDiDrf6Dt7v2ZVJjrZDTm3GoNHcdPlv97YxUp6irZcgsHXAg-gOJuRKlMUyws2KlD7xlyEp2cXWx5LyDA-n-__igmNDQp4F8iuJ9OKRfxNpOG4D0UsEdz08YFceZwkYZ9AjiWtlAAjvZZVxv0g6CLhJkJuIXviAB4PgxYAixDibB_SDDq7CxYVyPGNAR","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:44:31.241 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:44:31.276 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:44:31.312 +07:00 [DBG] webclient found in database: true
2022-01-17 22:44:31.313 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:44:31.314 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:44:31.314 +07:00 [DBG] No PKCE used.
2022-01-17 22:44:31.321 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:44:31.331 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:44:31.335 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:44:31.336 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:44:31.367 +07:00 [DBG] webclient found in database: true
2022-01-17 22:44:31.368 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:44:58.018 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:44:58.023 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:44:58.024 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:44:58.029 +07:00 [DBG] Start token request.
2022-01-17 22:44:58.031 +07:00 [DBG] Start client validation
2022-01-17 22:44:58.034 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:44:58.035 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:44:58.039 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:44:58.040 +07:00 [DBG] Secret id found: postman
2022-01-17 22:44:58.072 +07:00 [DBG] postman found in database: true
2022-01-17 22:44:58.072 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:44:58.081 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:44:58.081 +07:00 [DBG] Client validation success
2022-01-17 22:44:58.087 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ0V3MAG0:00000001","TimeStamp":"2022-01-17T15:44:58.0000000Z","ProcessId":13396,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:44:58.091 +07:00 [DBG] Start token request validation
2022-01-17 22:44:58.095 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:44:58.103 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:44:58.113 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:44:58.119 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:44:58.236 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:44:58.251 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQ0V3MAG0:00000001","TimeStamp":"2022-01-17T15:44:58.0000000Z","ProcessId":13396,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:44:58.256 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:44:58.259 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:44:58.278 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:44:58.279 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:44:58.417 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****9AZw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ0V3MAG0:00000001","TimeStamp":"2022-01-17T15:44:58.0000000Z","ProcessId":13396,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:44:58.423 +07:00 [DBG] Token request success.
2022-01-17 22:45:58.045 +07:00 [INF] Starting host...
2022-01-17 22:45:58.252 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:45:58.391 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:45:58.392 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:45:58.392 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:45:58.392 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:45:58.393 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:45:58.393 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:46:00.760 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:46:00.764 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:46:00.764 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:46:00.765 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:46:00.766 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:46:00.767 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:46:00.767 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:46:01.150 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:46:01.170 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:46:01.171 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:46:01.174 +07:00 [DBG] Start discovery request
2022-01-17 22:46:03.101 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:46:03.364 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:46:03.366 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:46:03.367 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:46:03.370 +07:00 [DBG] Start key discovery request
2022-01-17 22:46:03.422 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:46:03.427 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:46:03.427 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:46:03.430 +07:00 [DBG] Start authorize request
2022-01-17 22:46:03.434 +07:00 [DBG] No user present in authorize request
2022-01-17 22:46:03.436 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:46:03.717 +07:00 [DBG] webclient found in database: true
2022-01-17 22:46:03.723 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:46:03.732 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:46:03.733 +07:00 [DBG] No PKCE used.
2022-01-17 22:46:03.819 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:46:03.867 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:46:03.898 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:46:03.925 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:46:03.937 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiKfXa9WwByTEKS8rWxIAarKKLDPnlYoClcQiSRCLM8rr8R15wWnQC2X_vCwHfciyluRa4gI31LMqJQWu1I7eze48L-zciOqHsJofSSaH1fQCByrRuOkhRKJdQhadQec8vfE6tNrn9pxND2jCz5JAFFW_83-Jn6a5dwDDPTMqnAMYaa1_UvYqHdqL93vOg7QcfAQlVKPTHQ5kGEZ9jmGO4XsvTJdBitzmE3OWGHWmPz3Di730njuDUEe4HpKxO63WTJeHMDG4FVqpI5h5UqzmRB9","UiLocales":null,"Nonce":"637780311634070075.ZTlhODYyMDQtY2QxYy00MGIyLTgyZTUtYTBjM2U5ZmJmMjNjYTNlN2NhNjktYjgzOC00MjM5LTllMWYtYTQ2YjQyMDJiNWYz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780311634070075.ZTlhODYyMDQtY2QxYy00MGIyLTgyZTUtYTBjM2U5ZmJmMjNjYTNlN2NhNjktYjgzOC00MjM5LTllMWYtYTQ2YjQyMDJiNWYz","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiKfXa9WwByTEKS8rWxIAarKKLDPnlYoClcQiSRCLM8rr8R15wWnQC2X_vCwHfciyluRa4gI31LMqJQWu1I7eze48L-zciOqHsJofSSaH1fQCByrRuOkhRKJdQhadQec8vfE6tNrn9pxND2jCz5JAFFW_83-Jn6a5dwDDPTMqnAMYaa1_UvYqHdqL93vOg7QcfAQlVKPTHQ5kGEZ9jmGO4XsvTJdBitzmE3OWGHWmPz3Di730njuDUEe4HpKxO63WTJeHMDG4FVqpI5h5UqzmRB9","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:46:03.952 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:46:03.989 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:46:04.011 +07:00 [DBG] webclient found in database: true
2022-01-17 22:46:04.011 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:46:04.012 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:46:04.013 +07:00 [DBG] No PKCE used.
2022-01-17 22:46:04.015 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:46:04.017 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:46:04.021 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:46:04.023 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:46:04.038 +07:00 [DBG] webclient found in database: true
2022-01-17 22:46:04.039 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:46:05.292 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:46:05.296 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:46:05.297 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:46:05.300 +07:00 [DBG] Start token request.
2022-01-17 22:46:05.302 +07:00 [DBG] Start client validation
2022-01-17 22:46:05.307 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:46:05.308 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:46:05.311 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:46:05.312 +07:00 [DBG] Secret id found: postman
2022-01-17 22:46:05.327 +07:00 [DBG] postman found in database: true
2022-01-17 22:46:05.327 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:46:05.337 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:46:05.337 +07:00 [DBG] Client validation success
2022-01-17 22:46:05.343 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000001","TimeStamp":"2022-01-17T15:46:05.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:46:05.348 +07:00 [DBG] Start token request validation
2022-01-17 22:46:05.353 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:46:05.362 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:46:05.372 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:46:05.376 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:46:05.484 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:46:05.497 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000001","TimeStamp":"2022-01-17T15:46:05.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:46:05.501 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:46:05.504 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:46:05.527 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:46:05.528 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:46:05.691 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****maow","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000001","TimeStamp":"2022-01-17T15:46:05.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:46:05.697 +07:00 [DBG] Token request success.
2022-01-17 22:46:18.985 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:46:18.989 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:46:18.991 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:46:18.992 +07:00 [DBG] Start token request.
2022-01-17 22:46:18.992 +07:00 [DBG] Start client validation
2022-01-17 22:46:18.992 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:46:18.993 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:46:18.994 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:46:18.994 +07:00 [DBG] Secret id found: postman
2022-01-17 22:46:19.008 +07:00 [DBG] postman found in database: true
2022-01-17 22:46:19.009 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:46:19.013 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:46:19.013 +07:00 [DBG] Client validation success
2022-01-17 22:46:19.014 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000002","TimeStamp":"2022-01-17T15:46:19.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:46:19.017 +07:00 [DBG] Start token request validation
2022-01-17 22:46:19.017 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:46:19.025 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:46:19.036 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:46:19.040 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:46:19.050 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:46:19.051 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000002","TimeStamp":"2022-01-17T15:46:19.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:46:19.055 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:46:19.058 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:46:19.063 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:46:19.064 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:46:19.074 +07:00 [DBG] Creating refresh token
2022-01-17 22:46:19.075 +07:00 [DBG] Setting an absolute lifetime: 2592000
2022-01-17 22:46:19.118 +07:00 [DBG] M7Q1imD83xnuqXrV1DyYIUHXGLMxDByh0p0NfM4wF08= not found in database
2022-01-17 22:46:19.236 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****AC9A","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Wakg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000002","TimeStamp":"2022-01-17T15:46:19.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:46:19.241 +07:00 [DBG] Token request success.
2022-01-17 22:47:31.556 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:47:31.575 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:47:31.576 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:47:31.577 +07:00 [DBG] Start token request.
2022-01-17 22:47:31.578 +07:00 [DBG] Start client validation
2022-01-17 22:47:31.578 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:47:31.579 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:47:31.583 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:47:31.583 +07:00 [DBG] Secret id found: postman
2022-01-17 22:47:31.610 +07:00 [DBG] postman found in database: true
2022-01-17 22:47:31.611 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:47:31.613 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:47:31.613 +07:00 [DBG] Client validation success
2022-01-17 22:47:31.615 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000003","TimeStamp":"2022-01-17T15:47:31.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:47:31.617 +07:00 [DBG] Start token request validation
2022-01-17 22:47:31.620 +07:00 [DBG] Start validation of refresh token request
2022-01-17 22:47:31.637 +07:00 [DBG] M7Q1imD83xnuqXrV1DyYIUHXGLMxDByh0p0NfM4wF08= found in database: true
2022-01-17 22:47:31.676 +07:00 [DBG] Validation of refresh token request success
2022-01-17 22:47:31.676 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****AC9A","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:47:31.687 +07:00 [DBG] Updating refresh token
2022-01-17 22:47:31.688 +07:00 [DBG] Token usage is one-time only. Setting current handle as consumed, and generating new handle
2022-01-17 22:47:31.693 +07:00 [DBG] M7Q1imD83xnuqXrV1DyYIUHXGLMxDByh0p0NfM4wF08= found in database
2022-01-17 22:47:31.711 +07:00 [DBG] lp0N97GUoX9FAFCrXufGw4RjRKMeI366bH6dG8wDc1c= not found in database
2022-01-17 22:47:31.719 +07:00 [DBG] Created refresh token in store
2022-01-17 22:47:31.728 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:47:31.739 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:47:31.743 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:47:31.751 +07:00 [DBG] Getting claims for identity token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1 and client: postman
2022-01-17 22:47:31.751 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-01-17 22:47:31.755 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****NAlQ","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****45F4","$type":"Token"},{"TokenType":"access_token","TokenValue":"****q8ag","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000003","TimeStamp":"2022-01-17T15:47:31.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:47:31.762 +07:00 [DBG] Token request success.
2022-01-17 22:47:40.875 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:47:40.877 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:47:40.878 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:47:40.879 +07:00 [DBG] Start token request.
2022-01-17 22:47:40.880 +07:00 [DBG] Start client validation
2022-01-17 22:47:40.882 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:47:40.883 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:47:40.884 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:47:40.885 +07:00 [DBG] Secret id found: postman
2022-01-17 22:47:40.902 +07:00 [DBG] postman found in database: true
2022-01-17 22:47:40.902 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:47:40.903 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:47:40.904 +07:00 [DBG] Client validation success
2022-01-17 22:47:40.904 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000004","TimeStamp":"2022-01-17T15:47:40.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:47:40.906 +07:00 [DBG] Start token request validation
2022-01-17 22:47:40.906 +07:00 [DBG] Start validation of refresh token request
2022-01-17 22:47:40.909 +07:00 [DBG] M7Q1imD83xnuqXrV1DyYIUHXGLMxDByh0p0NfM4wF08= found in database: true
2022-01-17 22:47:40.913 +07:00 [WRN] Rejecting refresh token because it has been consumed already.
2022-01-17 22:47:40.913 +07:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:47:40.918 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000004","TimeStamp":"2022-01-17T15:47:40.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-01-17 22:49:35.892 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:49:35.896 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:49:35.897 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:49:35.898 +07:00 [DBG] Start token request.
2022-01-17 22:49:35.899 +07:00 [DBG] Start client validation
2022-01-17 22:49:35.900 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:49:35.901 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:49:35.902 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:49:35.902 +07:00 [DBG] Secret id found: postman
2022-01-17 22:49:35.929 +07:00 [DBG] postman found in database: true
2022-01-17 22:49:35.930 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:49:35.933 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:49:35.933 +07:00 [DBG] Client validation success
2022-01-17 22:49:35.934 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000005","TimeStamp":"2022-01-17T15:49:35.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:49:35.936 +07:00 [DBG] Start token request validation
2022-01-17 22:49:35.936 +07:00 [DBG] Start validation of refresh token request
2022-01-17 22:49:35.939 +07:00 [DBG] M7Q1imD83xnuqXrV1DyYIUHXGLMxDByh0p0NfM4wF08= found in database: true
2022-01-17 22:49:35.940 +07:00 [WRN] Rejecting refresh token because it has been consumed already.
2022-01-17 22:49:35.942 +07:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:49:35.945 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HMEPQ1QJRQLV:00000005","TimeStamp":"2022-01-17T15:49:35.0000000Z","ProcessId":20712,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-01-17 22:52:44.522 +07:00 [INF] Starting host...
2022-01-17 22:52:44.713 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:52:44.855 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:52:44.857 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:52:44.857 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:52:44.857 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:52:44.857 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:52:44.858 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:52:48.073 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:52:48.135 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:52:48.161 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:52:48.166 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:52:48.168 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:52:48.170 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:52:48.171 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:52:48.537 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:52:48.550 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:52:48.551 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:52:48.553 +07:00 [DBG] Start discovery request
2022-01-17 22:52:50.923 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:52:51.195 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:52:51.198 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:52:51.198 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:52:51.201 +07:00 [DBG] Start key discovery request
2022-01-17 22:52:51.253 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:52:51.257 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:52:51.258 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:52:51.262 +07:00 [DBG] Start authorize request
2022-01-17 22:52:51.266 +07:00 [DBG] No user present in authorize request
2022-01-17 22:52:51.268 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:52:51.553 +07:00 [DBG] webclient found in database: true
2022-01-17 22:52:51.559 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:52:51.569 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:52:51.570 +07:00 [DBG] No PKCE used.
2022-01-17 22:52:51.620 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:52:51.656 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:52:51.675 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:52:51.684 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:52:51.693 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiK9s9WDoSxVZ9bncWnp_CXeMkUyIxdXoDu7-WtOpHGxp8WV0NOrx_DQUkod3ejSDMJxMAGDelFEMyKokP80a_9eWJQvO3hAaqqCemwE3llvNFYEHWrtAqiEozMAVtsssGBq63IRuRxivwk7tbLAxNEThQcHSH5o4SwTUpyh5cgMTL6NrL89HeYYjMiNxG64_A3sbLVXFDutCRX7p6Ctp63l6pjqZvONiOpEcj8zsSEn1vqRAZ52UgJYTksgenbMgYZ-7lYx3r3E6vvzVB4EisLN","UiLocales":null,"Nonce":"637780315712376727.M2EzMGFkZDMtMDQ4OC00YjdiLWI4N2UtNTcyNGVlZDdiOGZhNGM1OWY4ZmItZTEwMC00NGFjLWJkMTYtN2Q4MmEwZmNjN2Jl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780315712376727.M2EzMGFkZDMtMDQ4OC00YjdiLWI4N2UtNTcyNGVlZDdiOGZhNGM1OWY4ZmItZTEwMC00NGFjLWJkMTYtN2Q4MmEwZmNjN2Jl","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiK9s9WDoSxVZ9bncWnp_CXeMkUyIxdXoDu7-WtOpHGxp8WV0NOrx_DQUkod3ejSDMJxMAGDelFEMyKokP80a_9eWJQvO3hAaqqCemwE3llvNFYEHWrtAqiEozMAVtsssGBq63IRuRxivwk7tbLAxNEThQcHSH5o4SwTUpyh5cgMTL6NrL89HeYYjMiNxG64_A3sbLVXFDutCRX7p6Ctp63l6pjqZvONiOpEcj8zsSEn1vqRAZ52UgJYTksgenbMgYZ-7lYx3r3E6vvzVB4EisLN","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:52:51.707 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:52:51.745 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:52:51.767 +07:00 [DBG] webclient found in database: true
2022-01-17 22:52:51.768 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:52:51.769 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:52:51.769 +07:00 [DBG] No PKCE used.
2022-01-17 22:52:51.772 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:52:51.775 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:52:51.778 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:52:51.779 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:52:51.794 +07:00 [DBG] webclient found in database: true
2022-01-17 22:52:51.795 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:53:37.477 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:53:37.482 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:53:37.482 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:53:37.486 +07:00 [DBG] Start token request.
2022-01-17 22:53:37.488 +07:00 [DBG] Start client validation
2022-01-17 22:53:37.490 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:53:37.491 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:53:37.495 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:53:37.495 +07:00 [DBG] Secret id found: postman
2022-01-17 22:53:37.523 +07:00 [DBG] postman found in database: true
2022-01-17 22:53:37.524 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:53:37.532 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:53:37.533 +07:00 [DBG] Client validation success
2022-01-17 22:53:37.539 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ5JK8B8A:00000001","TimeStamp":"2022-01-17T15:53:37.0000000Z","ProcessId":29980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:53:37.543 +07:00 [DBG] Start token request validation
2022-01-17 22:53:37.546 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:53:37.555 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:53:37.569 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:53:37.573 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:53:37.683 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:53:37.694 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQ5JK8B8A:00000001","TimeStamp":"2022-01-17T15:53:37.0000000Z","ProcessId":29980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:53:37.698 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:53:37.701 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:53:37.723 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:53:37.724 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:53:37.865 +07:00 [DBG] Creating refresh token
2022-01-17 22:53:37.866 +07:00 [DBG] Setting an absolute lifetime: 2592000
2022-01-17 22:53:37.909 +07:00 [DBG] 1BVg557LlqvFdPm04i6rBS4OmIVmq4WvppOa5/Yum48= not found in database
2022-01-17 22:53:38.038 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****E05B","$type":"Token"},{"TokenType":"access_token","TokenValue":"****OEZA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ5JK8B8A:00000001","TimeStamp":"2022-01-17T15:53:38.0000000Z","ProcessId":29980,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:53:38.044 +07:00 [DBG] Token request success.
2022-01-17 22:54:36.304 +07:00 [INF] Starting host...
2022-01-17 22:54:36.513 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:54:36.653 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:54:36.654 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:54:36.655 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:54:36.655 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:54:36.655 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:54:36.656 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:54:39.535 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:54:39.537 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:54:39.538 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:54:39.539 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:54:39.539 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:54:39.540 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:54:39.541 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:54:39.558 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:54:39.600 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:54:39.602 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:54:39.607 +07:00 [DBG] Start discovery request
2022-01-17 22:54:41.802 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:54:42.082 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:54:42.086 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:54:42.086 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:54:42.088 +07:00 [DBG] Start key discovery request
2022-01-17 22:54:42.142 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:54:42.146 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:54:42.146 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:54:42.149 +07:00 [DBG] Start authorize request
2022-01-17 22:54:42.153 +07:00 [DBG] No user present in authorize request
2022-01-17 22:54:42.157 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:54:42.468 +07:00 [DBG] webclient found in database: true
2022-01-17 22:54:42.475 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:54:42.486 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:54:42.487 +07:00 [DBG] No PKCE used.
2022-01-17 22:54:42.545 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:54:42.591 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:54:42.610 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:54:42.619 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:54:42.629 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiKk8ndQrZk47jon2hq-YiM_AY-x01GPbB_LQwqrbtImoxSQ4C9aa6vZYLa5RqSM6xtdNgReIHWy4k0287Sia5ryK4xFu_sQEnN_Z2YEgXwJnqZDgpU0iBd2MlEgKP5y_Fgt_QCKusQ5UGHcqiUXzmNTx639U-wLjBLRNyA_hxtAW-8UgWBbIBdaFwSDeG4rorwWpgH0brQTgz3pEtGxRjmcalLMQ9kwmfYmch1PQ2syZktBHAqW0t48CZzoZTa_dNr1cirMeQDYIrxrXE7v_i6W","UiLocales":null,"Nonce":"637780316821237733.N2JhYmY4MzItODk5My00YzRkLTk4NzYtMTJkNDlhMzhlMzc3ZGFjMmIxNmQtODA4Zi00MDYyLWE2OTAtZjkzMDEwNTg2NTQz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780316821237733.N2JhYmY4MzItODk5My00YzRkLTk4NzYtMTJkNDlhMzhlMzc3ZGFjMmIxNmQtODA4Zi00MDYyLWE2OTAtZjkzMDEwNTg2NTQz","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiKk8ndQrZk47jon2hq-YiM_AY-x01GPbB_LQwqrbtImoxSQ4C9aa6vZYLa5RqSM6xtdNgReIHWy4k0287Sia5ryK4xFu_sQEnN_Z2YEgXwJnqZDgpU0iBd2MlEgKP5y_Fgt_QCKusQ5UGHcqiUXzmNTx639U-wLjBLRNyA_hxtAW-8UgWBbIBdaFwSDeG4rorwWpgH0brQTgz3pEtGxRjmcalLMQ9kwmfYmch1PQ2syZktBHAqW0t48CZzoZTa_dNr1cirMeQDYIrxrXE7v_i6W","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:54:42.646 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:54:42.705 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:54:42.724 +07:00 [DBG] webclient found in database: true
2022-01-17 22:54:42.725 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:54:42.726 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:54:42.726 +07:00 [DBG] No PKCE used.
2022-01-17 22:54:42.729 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:54:42.733 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:54:42.735 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:54:42.736 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:54:42.751 +07:00 [DBG] webclient found in database: true
2022-01-17 22:54:42.751 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:54:43.285 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:54:43.290 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:54:43.291 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:54:43.295 +07:00 [DBG] Start token request.
2022-01-17 22:54:43.296 +07:00 [DBG] Start client validation
2022-01-17 22:54:43.299 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:54:43.300 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:54:43.305 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:54:43.306 +07:00 [DBG] Secret id found: postman
2022-01-17 22:54:43.319 +07:00 [DBG] postman found in database: true
2022-01-17 22:54:43.319 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:54:43.330 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:54:43.331 +07:00 [DBG] Client validation success
2022-01-17 22:54:43.338 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ6LB42E9:00000001","TimeStamp":"2022-01-17T15:54:43.0000000Z","ProcessId":28248,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:54:43.343 +07:00 [DBG] Start token request validation
2022-01-17 22:54:43.346 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:54:43.353 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:54:43.362 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:54:43.366 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:54:43.479 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:54:43.492 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQ6LB42E9:00000001","TimeStamp":"2022-01-17T15:54:43.0000000Z","ProcessId":28248,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:54:43.497 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:54:43.500 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:54:43.518 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:54:43.520 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:54:43.671 +07:00 [DBG] Creating refresh token
2022-01-17 22:54:43.672 +07:00 [DBG] Setting an absolute lifetime: 2592000
2022-01-17 22:54:43.724 +07:00 [DBG] 9lk5VTHedHfPaARv/x2XktfenKXm9nW86lYiIDEFdHY= not found in database
2022-01-17 22:54:43.860 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****F99C","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5gjA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ6LB42E9:00000001","TimeStamp":"2022-01-17T15:54:43.0000000Z","ProcessId":28248,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:54:43.865 +07:00 [DBG] Token request success.
2022-01-17 22:55:57.687 +07:00 [INF] Starting host...
2022-01-17 22:55:57.925 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 22:55:58.060 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 22:55:58.061 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 22:55:58.062 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 22:55:58.062 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 22:55:58.062 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 22:55:58.062 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 22:56:00.352 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 22:56:00.358 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 22:56:00.360 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 22:56:00.364 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 22:56:00.369 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 22:56:00.371 +07:00 [DBG] Error Url: /home/error
2022-01-17 22:56:00.373 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 22:56:00.730 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 22:56:00.749 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 22:56:00.751 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 22:56:00.754 +07:00 [DBG] Start discovery request
2022-01-17 22:56:02.565 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 22:56:02.810 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 22:56:02.812 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 22:56:02.813 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 22:56:02.816 +07:00 [DBG] Start key discovery request
2022-01-17 22:56:02.866 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 22:56:02.872 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 22:56:02.873 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 22:56:02.874 +07:00 [DBG] Start authorize request
2022-01-17 22:56:02.878 +07:00 [DBG] No user present in authorize request
2022-01-17 22:56:02.879 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:56:03.183 +07:00 [DBG] webclient found in database: true
2022-01-17 22:56:03.188 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:56:03.199 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:56:03.201 +07:00 [DBG] No PKCE used.
2022-01-17 22:56:03.251 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:56:03.291 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:56:03.332 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:56:03.347 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:56:03.363 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiKGByxdFxSPUrwJcIAu53zourd34yr8KykQARUEoDvHIVnqibFTqSK4EI16FXFXbH7sIorY6PlofCR7uomd1jGli9unnPW8HTdlI71-mdcx8n9S3EvhjcxLVV70VuXzx6tt75y9PHSAkBDrpuj8YqJGZ9hrDrYodorjDhb2Eg59BSSxA5p6JozWBLoyODFNCSfYrJ1HBsMHWvWhA06mxRXTnxgdbNI1QIgEp-3e_ojSJTiPjBWn04v9MDEsieTj-wFf0zPdtSe0eoKAZlYbGxiM","UiLocales":null,"Nonce":"637780317628500168.YjYyMzBiOWItZjc1Ny00MWJjLWFiMmMtMWVhN2QzMGNkYzEwMGRlNTNmZDMtODE2Mi00OGEyLWI1MWQtNjlhOThlMDViYTMz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780317628500168.YjYyMzBiOWItZjc1Ny00MWJjLWFiMmMtMWVhN2QzMGNkYzEwMGRlNTNmZDMtODE2Mi00OGEyLWI1MWQtNjlhOThlMDViYTMz","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiKGByxdFxSPUrwJcIAu53zourd34yr8KykQARUEoDvHIVnqibFTqSK4EI16FXFXbH7sIorY6PlofCR7uomd1jGli9unnPW8HTdlI71-mdcx8n9S3EvhjcxLVV70VuXzx6tt75y9PHSAkBDrpuj8YqJGZ9hrDrYodorjDhb2Eg59BSSxA5p6JozWBLoyODFNCSfYrJ1HBsMHWvWhA06mxRXTnxgdbNI1QIgEp-3e_ojSJTiPjBWn04v9MDEsieTj-wFf0zPdtSe0eoKAZlYbGxiM","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 22:56:03.380 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 22:56:03.419 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 22:56:03.441 +07:00 [DBG] webclient found in database: true
2022-01-17 22:56:03.441 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:56:03.442 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 22:56:03.442 +07:00 [DBG] No PKCE used.
2022-01-17 22:56:03.446 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:56:03.451 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:56:03.455 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:56:03.464 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 22:56:03.494 +07:00 [DBG] webclient found in database: true
2022-01-17 22:56:03.495 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 22:56:04.789 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:56:04.794 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:56:04.794 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:56:04.797 +07:00 [DBG] Start token request.
2022-01-17 22:56:04.799 +07:00 [DBG] Start client validation
2022-01-17 22:56:04.803 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:56:04.804 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:56:04.809 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:56:04.809 +07:00 [DBG] Secret id found: postman
2022-01-17 22:56:04.824 +07:00 [DBG] postman found in database: true
2022-01-17 22:56:04.824 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:56:04.832 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:56:04.832 +07:00 [DBG] Client validation success
2022-01-17 22:56:04.838 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000001","TimeStamp":"2022-01-17T15:56:04.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:56:04.843 +07:00 [DBG] Start token request validation
2022-01-17 22:56:04.846 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 22:56:04.854 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:56:04.863 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:56:04.867 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:56:04.981 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 22:56:04.995 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000001","TimeStamp":"2022-01-17T15:56:04.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 22:56:04.999 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 22:56:05.003 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:56:05.018 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 22:56:05.019 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 22:56:05.171 +07:00 [DBG] Creating refresh token
2022-01-17 22:56:05.172 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 22:56:05.220 +07:00 [DBG] nUVMaL2FvRjmd2zYcdmL5dbXKQv4yivOdBQsMDmgyFk= not found in database
2022-01-17 22:56:05.353 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****71EC","$type":"Token"},{"TokenType":"access_token","TokenValue":"****MT-g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000001","TimeStamp":"2022-01-17T15:56:05.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:56:05.362 +07:00 [DBG] Token request success.
2022-01-17 22:56:26.990 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:56:26.994 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:56:26.995 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:56:26.997 +07:00 [DBG] Start token request.
2022-01-17 22:56:26.997 +07:00 [DBG] Start client validation
2022-01-17 22:56:26.998 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:56:26.998 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:56:26.999 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:56:27.000 +07:00 [DBG] Secret id found: postman
2022-01-17 22:56:27.027 +07:00 [DBG] postman found in database: true
2022-01-17 22:56:27.027 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:56:27.030 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:56:27.030 +07:00 [DBG] Client validation success
2022-01-17 22:56:27.031 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000002","TimeStamp":"2022-01-17T15:56:27.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:56:27.034 +07:00 [DBG] Start token request validation
2022-01-17 22:56:27.035 +07:00 [DBG] Start validation of refresh token request
2022-01-17 22:56:27.046 +07:00 [DBG] 5lplY49CwU/7rnCmeT2eUVJubbfdZhB7OV3+AhQ93p0= found in database: false
2022-01-17 22:56:27.047 +07:00 [DBG] refresh_token grant with value: 29CEFB412A16DE2C537A6976FAF01CC6F9629102645A610C5F4968D1D10671E not found in store.
2022-01-17 22:56:27.048 +07:00 [WRN] Invalid refresh token
2022-01-17 22:56:27.049 +07:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:56:27.054 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000002","TimeStamp":"2022-01-17T15:56:27.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-01-17 22:56:30.556 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 22:56:30.581 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 22:56:30.582 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 22:56:30.583 +07:00 [DBG] Start token request.
2022-01-17 22:56:30.583 +07:00 [DBG] Start client validation
2022-01-17 22:56:30.583 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 22:56:30.584 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 22:56:30.585 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 22:56:30.585 +07:00 [DBG] Secret id found: postman
2022-01-17 22:56:30.599 +07:00 [DBG] postman found in database: true
2022-01-17 22:56:30.599 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 22:56:30.600 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 22:56:30.600 +07:00 [DBG] Client validation success
2022-01-17 22:56:30.602 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000003","TimeStamp":"2022-01-17T15:56:30.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 22:56:30.607 +07:00 [DBG] Start token request validation
2022-01-17 22:56:30.607 +07:00 [DBG] Start validation of refresh token request
2022-01-17 22:56:30.614 +07:00 [DBG] nUVMaL2FvRjmd2zYcdmL5dbXKQv4yivOdBQsMDmgyFk= found in database: true
2022-01-17 22:56:30.649 +07:00 [DBG] Validation of refresh token request success
2022-01-17 22:56:30.650 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****71EC","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 22:56:30.659 +07:00 [DBG] Updating refresh token
2022-01-17 22:56:30.660 +07:00 [DBG] Token usage is one-time only. Setting current handle as consumed, and generating new handle
2022-01-17 22:56:30.663 +07:00 [DBG] nUVMaL2FvRjmd2zYcdmL5dbXKQv4yivOdBQsMDmgyFk= found in database
2022-01-17 22:56:30.681 +07:00 [DBG] Mkid5uqmqyMKSvruktGyiNyad7lBAht0ZxhwDQIHPl0= not found in database
2022-01-17 22:56:30.687 +07:00 [DBG] Created refresh token in store
2022-01-17 22:56:30.694 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 22:56:30.704 +07:00 [DBG] Found [] API resources in database
2022-01-17 22:56:30.708 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 22:56:30.715 +07:00 [DBG] Getting claims for identity token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1 and client: postman
2022-01-17 22:56:30.716 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2022-01-17 22:56:30.721 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api openid profile test.api offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****hV8A","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****3A73","$type":"Token"},{"TokenType":"access_token","TokenValue":"****iSwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQ7DDOQCH:00000003","TimeStamp":"2022-01-17T15:56:30.0000000Z","ProcessId":14444,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 22:56:30.726 +07:00 [DBG] Token request success.
2022-01-17 23:01:17.990 +07:00 [INF] Seeding database...
2022-01-17 23:01:18.947 +07:00 [DBG] ApiScopes already populated
2022-01-17 23:01:18.951 +07:00 [DBG] Clients being populated
2022-01-17 23:01:19.537 +07:00 [DBG] IdentityResources already populated
2022-01-17 23:01:19.541 +07:00 [DBG] ApiResources already populated
2022-01-17 23:01:19.543 +07:00 [INF] Done seeding database.
2022-01-17 23:01:52.836 +07:00 [INF] Starting host...
2022-01-17 23:01:52.997 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 23:01:53.117 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 23:01:53.118 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 23:01:53.118 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 23:01:53.118 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 23:01:53.118 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 23:01:53.119 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 23:01:55.630 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 23:01:55.637 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 23:01:55.646 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 23:01:55.657 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 23:01:55.664 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 23:01:55.669 +07:00 [DBG] Error Url: /home/error
2022-01-17 23:01:55.671 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 23:01:56.089 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 23:01:56.102 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 23:01:56.103 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 23:01:56.105 +07:00 [DBG] Start discovery request
2022-01-17 23:01:58.001 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 23:01:58.250 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 23:01:58.252 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 23:01:58.253 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 23:01:58.255 +07:00 [DBG] Start key discovery request
2022-01-17 23:01:58.310 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 23:01:58.314 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 23:01:58.315 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 23:01:58.317 +07:00 [DBG] Start authorize request
2022-01-17 23:01:58.321 +07:00 [DBG] No user present in authorize request
2022-01-17 23:01:58.323 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 23:01:58.655 +07:00 [DBG] webclient found in database: true
2022-01-17 23:01:58.660 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:01:58.674 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 23:01:58.675 +07:00 [DBG] No PKCE used.
2022-01-17 23:01:58.729 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:01:58.767 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:01:58.799 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:01:58.814 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 23:01:58.826 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiJ_RXNuTJwjqZj5KIHJZROTTWW9mPBDUGOnt3X-q7NihpyR90rHq5I1ywzlzp3NbjuO-pzjHmr1LZQBO59LVY9O3W_T_cKlsqQj2Fahg_DkJUal0DnJHjH6-mcONzMWJn7KDFCaicDRPet4u7fqbs-glQz1Wzk0bBx0r-lnj1WvDqW35FQ6RVGsxfioDD4wD5VYPPEZz_gq0aCD9-AfdQREg0FdAG5c_fVm-rHk7RPb8dxwAfqVmGFIncHKYyWvqrPPgKpHtLOXfP3L4eW55-QF","UiLocales":null,"Nonce":"637780321182905124.NTc1MmY1ZTItOGIwNy00Y2JmLWE0MzItYzI2YjEzNmMxMDA2ODBlN2EzMzYtNzgwNy00NDRjLWI4N2ItMTIzZTllZWQ1MDE3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780321182905124.NTc1MmY1ZTItOGIwNy00Y2JmLWE0MzItYzI2YjEzNmMxMDA2ODBlN2EzMzYtNzgwNy00NDRjLWI4N2ItMTIzZTllZWQ1MDE3","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiJ_RXNuTJwjqZj5KIHJZROTTWW9mPBDUGOnt3X-q7NihpyR90rHq5I1ywzlzp3NbjuO-pzjHmr1LZQBO59LVY9O3W_T_cKlsqQj2Fahg_DkJUal0DnJHjH6-mcONzMWJn7KDFCaicDRPet4u7fqbs-glQz1Wzk0bBx0r-lnj1WvDqW35FQ6RVGsxfioDD4wD5VYPPEZz_gq0aCD9-AfdQREg0FdAG5c_fVm-rHk7RPb8dxwAfqVmGFIncHKYyWvqrPPgKpHtLOXfP3L4eW55-QF","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 23:01:58.841 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 23:01:58.879 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 23:01:58.901 +07:00 [DBG] webclient found in database: true
2022-01-17 23:01:58.901 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:01:58.902 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 23:01:58.903 +07:00 [DBG] No PKCE used.
2022-01-17 23:01:58.905 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:01:58.908 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:01:58.911 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:01:58.913 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 23:01:58.928 +07:00 [DBG] webclient found in database: true
2022-01-17 23:01:58.930 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:02:04.972 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:02:04.977 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:02:04.977 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:02:04.981 +07:00 [DBG] Start token request.
2022-01-17 23:02:04.982 +07:00 [DBG] Start client validation
2022-01-17 23:02:04.985 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:02:04.986 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:02:04.989 +07:00 [DBG] client id without secret found
2022-01-17 23:02:04.990 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:02:04.990 +07:00 [DBG] Secret id found: PostmanWithoutSecret
2022-01-17 23:02:05.005 +07:00 [DBG] PostmanWithoutSecret found in database: true
2022-01-17 23:02:05.006 +07:00 [ERR] Invalid client configuration for client PostmanWithoutSecret: Client secret is required for password, but no client secret is configured.
2022-01-17 23:02:05.012 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","Category":"Error","Name":"Invalid Client Configuration","EventType":"Error","Id":3001,"Message":"Client secret is required for password, but no client secret is configured.","ActivityId":"0HMEPQAN0MN76:00000001","TimeStamp":"2022-01-17T16:02:05.0000000Z","ProcessId":8312,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"InvalidClientConfigurationEvent"}
2022-01-17 23:02:05.016 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Unknown client","ActivityId":"0HMEPQAN0MN76:00000001","TimeStamp":"2022-01-17T16:02:05.0000000Z","ProcessId":8312,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2022-01-17 23:02:05.018 +07:00 [ERR] No client with id 'PostmanWithoutSecret' found. aborting
2022-01-17 23:06:00.140 +07:00 [INF] Starting host...
2022-01-17 23:06:00.333 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 23:06:00.490 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 23:06:00.490 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 23:06:00.491 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 23:06:00.491 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 23:06:00.491 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 23:06:00.492 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 23:06:03.046 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 23:06:03.063 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 23:06:03.077 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 23:06:03.080 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 23:06:03.081 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 23:06:03.082 +07:00 [DBG] Error Url: /home/error
2022-01-17 23:06:03.083 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 23:06:03.562 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 23:06:03.577 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 23:06:03.578 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 23:06:03.580 +07:00 [DBG] Start discovery request
2022-01-17 23:06:05.390 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 23:06:05.646 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 23:06:05.648 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 23:06:05.649 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 23:06:05.651 +07:00 [DBG] Start key discovery request
2022-01-17 23:06:05.703 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 23:06:05.707 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 23:06:05.709 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 23:06:05.712 +07:00 [DBG] Start authorize request
2022-01-17 23:06:05.717 +07:00 [DBG] No user present in authorize request
2022-01-17 23:06:05.719 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 23:06:06.001 +07:00 [DBG] webclient found in database: true
2022-01-17 23:06:06.007 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:06:06.017 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 23:06:06.018 +07:00 [DBG] No PKCE used.
2022-01-17 23:06:06.068 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:06:06.104 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:06:06.122 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:06:06.130 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 23:06:06.141 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiIP2rnvzFtjOuC3_968fw6PPK38_maeNvLkseDWSG6PhLAJGuMZvhgmBfOV9IIWzxrvpBlKFyi2t8hEn9IWjEgIn0aIOYCEvPzwQNRZxEMG86Hz9_aF-pCCVtLSDE74PYkP4zKy47WmZvrH1DoROz-9El9G8DlCt5vPaR5usIAt_gVUjAagNrsLXjlQ0Ja-AsTL-Sds8vgHzyDmIPMIAONVyUMxDrjD3EZ-vHkJlSUOZlYPaeekqQapEhjHODMfVVhI6pqr5pqXQ_QrM92mUqh3","UiLocales":null,"Nonce":"637780323656853714.NWNjNDcwMDYtNjVhYS00N2ZiLWFjZTMtYzE1M2RhMWNiMzgzNGQ1MTI4MzYtZGY5ZS00OGNmLTllNDYtMDEwNWU5NDNjMGRm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780323656853714.NWNjNDcwMDYtNjVhYS00N2ZiLWFjZTMtYzE1M2RhMWNiMzgzNGQ1MTI4MzYtZGY5ZS00OGNmLTllNDYtMDEwNWU5NDNjMGRm","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiIP2rnvzFtjOuC3_968fw6PPK38_maeNvLkseDWSG6PhLAJGuMZvhgmBfOV9IIWzxrvpBlKFyi2t8hEn9IWjEgIn0aIOYCEvPzwQNRZxEMG86Hz9_aF-pCCVtLSDE74PYkP4zKy47WmZvrH1DoROz-9El9G8DlCt5vPaR5usIAt_gVUjAagNrsLXjlQ0Ja-AsTL-Sds8vgHzyDmIPMIAONVyUMxDrjD3EZ-vHkJlSUOZlYPaeekqQapEhjHODMfVVhI6pqr5pqXQ_QrM92mUqh3","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 23:06:06.157 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 23:06:06.199 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 23:06:06.221 +07:00 [DBG] webclient found in database: true
2022-01-17 23:06:06.221 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:06:06.223 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 23:06:06.224 +07:00 [DBG] No PKCE used.
2022-01-17 23:06:06.227 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:06:06.230 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:06:06.233 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:06:06.234 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 23:06:06.248 +07:00 [DBG] webclient found in database: true
2022-01-17 23:06:06.248 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:06:11.323 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:06:11.327 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:06:11.329 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:06:11.333 +07:00 [DBG] Start token request.
2022-01-17 23:06:11.335 +07:00 [DBG] Start client validation
2022-01-17 23:06:11.339 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:06:11.340 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:06:11.345 +07:00 [DBG] client id without secret found
2022-01-17 23:06:11.345 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:06:11.346 +07:00 [DBG] Secret id found: PostmanWithoutSecret
2022-01-17 23:06:11.360 +07:00 [DBG] PostmanWithoutSecret found in database: true
2022-01-17 23:06:11.362 +07:00 [DBG] client configuration validation for client PostmanWithoutSecret succeeded.
2022-01-17 23:06:11.363 +07:00 [DBG] Public Client - skipping secret validation success
2022-01-17 23:06:11.363 +07:00 [DBG] Client validation success
2022-01-17 23:06:11.369 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQD0QV6LH:00000001","TimeStamp":"2022-01-17T16:06:11.0000000Z","ProcessId":28124,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:06:11.373 +07:00 [DBG] Start token request validation
2022-01-17 23:06:11.376 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:06:11.383 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:06:11.393 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:06:11.400 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:06:11.402 +07:00 [ERR] Client PostmanWithoutSecret is not allowed access to scope offline_access (via AllowOfflineAccess setting).
2022-01-17 23:06:11.407 +07:00 [ERR] Invalid scopes requested, {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","GrantType":"password","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"PostmanWithoutSecret","scope":"openid profile identity.api test.api offline_access"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:06:11.414 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HMEPQD0QV6LH:00000001","TimeStamp":"2022-01-17T16:06:11.0000000Z","ProcessId":28124,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-01-17 23:07:29.674 +07:00 [INF] Starting host...
2022-01-17 23:07:29.856 +07:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-01-17 23:07:29.988 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-01-17 23:07:29.988 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2022-01-17 23:07:29.989 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2022-01-17 23:07:29.989 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2022-01-17 23:07:29.989 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2022-01-17 23:07:29.989 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2022-01-17 23:07:32.557 +07:00 [DBG] Login Url: /Account/Login
2022-01-17 23:07:32.569 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2022-01-17 23:07:32.574 +07:00 [DBG] Logout Url: /Account/Logout
2022-01-17 23:07:32.576 +07:00 [DBG] ConsentUrl Url: /consent
2022-01-17 23:07:32.587 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2022-01-17 23:07:32.588 +07:00 [DBG] Error Url: /home/error
2022-01-17 23:07:32.592 +07:00 [DBG] Error Id Parameter: errorId
2022-01-17 23:07:33.222 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2022-01-17 23:07:33.239 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2022-01-17 23:07:33.240 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-01-17 23:07:33.244 +07:00 [DBG] Start discovery request
2022-01-17 23:07:35.901 +07:00 [DBG] Found ["profile","openid","test.api","identity.api"] as all scopes, and ["identity.api","test.api"] as API resources
2022-01-17 23:07:36.207 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:07:36.213 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:07:36.214 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:07:36.219 +07:00 [DBG] Start token request.
2022-01-17 23:07:36.222 +07:00 [DBG] Start client validation
2022-01-17 23:07:36.226 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:07:36.228 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:07:36.235 +07:00 [DBG] client id without secret found
2022-01-17 23:07:36.236 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:07:36.236 +07:00 [DBG] Secret id found: PostmanWithoutSecret
2022-01-17 23:07:36.294 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2022-01-17 23:07:36.297 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2022-01-17 23:07:36.298 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-01-17 23:07:36.300 +07:00 [DBG] Start key discovery request
2022-01-17 23:07:36.374 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2022-01-17 23:07:36.379 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2022-01-17 23:07:36.381 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-01-17 23:07:36.384 +07:00 [DBG] Start authorize request
2022-01-17 23:07:36.391 +07:00 [DBG] No user present in authorize request
2022-01-17 23:07:36.394 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 23:07:36.700 +07:00 [DBG] webclient found in database: true
2022-01-17 23:07:36.700 +07:00 [DBG] PostmanWithoutSecret found in database: true
2022-01-17 23:07:36.709 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:07:36.709 +07:00 [DBG] client configuration validation for client PostmanWithoutSecret succeeded.
2022-01-17 23:07:36.711 +07:00 [DBG] Public Client - skipping secret validation success
2022-01-17 23:07:36.712 +07:00 [DBG] Client validation success
2022-01-17 23:07:36.721 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 23:07:36.722 +07:00 [DBG] No PKCE used.
2022-01-17 23:07:36.723 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000001","TimeStamp":"2022-01-17T16:07:36.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:07:36.731 +07:00 [DBG] Start token request validation
2022-01-17 23:07:36.735 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:07:36.798 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:07:36.798 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:07:36.854 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:07:36.856 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:07:36.882 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:07:36.882 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:07:36.894 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 23:07:36.905 +07:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"webclient","ClientName":"Web Client","RedirectUri":"https://localhost:5002/signin-oidc","AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile test.api identity.api","State":"CfDJ8KAJnSD7L9pOqthyJq7PFiIMzoUxDiAs8Aa-sXzl6pfpsW8KjXdXTUY4aTymzNZGraL6n4HIP6OnaNvxxRQQD36RPQKgHFBpBYWyAW0HaPF0PisoXXrYEVcyovETYFJJHaJ2dMdG4hX8hXZd1WnmVVCMowc7PkT-_YNDXZXH5Tc_kMChdZhZBjKuBvJSwkbIedk2w8oLJETEY55jQk6vjU2n4codhPphPZ7tFQKrDvxlhY9-1DnlMVAqkBhYfPqItjawLLCjBePgtIoYvyNEp8nO0C4RXV_lj_wpfT7g1Gxo","UiLocales":null,"Nonce":"637780324563482300.MzUzMDljZWMtMzNmZi00OWJkLWJkOTAtODk1ZjdkYTNmYWUzYjE1NTY2YjAtZmNhMS00ZDY1LTljMjQtOTlmZDUxMDMzOGI4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"webclient","redirect_uri":"https://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile test.api identity.api","response_mode":"form_post","nonce":"637780324563482300.MzUzMDljZWMtMzNmZi00OWJkLWJkOTAtODk1ZjdkYTNmYWUzYjE1NTY2YjAtZmNhMS00ZDY1LTljMjQtOTlmZDUxMDMzOGI4","state":"CfDJ8KAJnSD7L9pOqthyJq7PFiIMzoUxDiAs8Aa-sXzl6pfpsW8KjXdXTUY4aTymzNZGraL6n4HIP6OnaNvxxRQQD36RPQKgHFBpBYWyAW0HaPF0PisoXXrYEVcyovETYFJJHaJ2dMdG4hX8hXZd1WnmVVCMowc7PkT-_YNDXZXH5Tc_kMChdZhZBjKuBvJSwkbIedk2w8oLJETEY55jQk6vjU2n4codhPphPZ7tFQKrDvxlhY9-1DnlMVAqkBhYfPqItjawLLCjBePgtIoYvyNEp8nO0C4RXV_lj_wpfT7g1Gxo","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.5.0.0"},"$type":"AuthorizeRequestValidationLog"}
2022-01-17 23:07:36.920 +07:00 [INF] Showing login: User is not authenticated
2022-01-17 23:07:36.967 +07:00 [DBG] Start authorize request protocol validation
2022-01-17 23:07:36.982 +07:00 [DBG] webclient found in database: true
2022-01-17 23:07:36.983 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:07:36.984 +07:00 [DBG] Checking for PKCE parameters
2022-01-17 23:07:36.986 +07:00 [DBG] No PKCE used.
2022-01-17 23:07:36.989 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:07:36.992 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:07:36.994 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:07:36.995 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2022-01-17 23:07:37.013 +07:00 [DBG] webclient found in database: true
2022-01-17 23:07:37.013 +07:00 [DBG] client configuration validation for client webclient succeeded.
2022-01-17 23:07:37.046 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 23:07:37.063 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"PostmanWithoutSecret","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000001","TimeStamp":"2022-01-17T16:07:37.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 23:07:37.068 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 23:07:37.072 +07:00 [INF] Token request validation success, {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"PostmanWithoutSecret","scope":"openid profile identity.api test.api offline_access"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:07:37.095 +07:00 [DBG] Getting claims for access token for client: PostmanWithoutSecret
2022-01-17 23:07:37.097 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 23:07:37.320 +07:00 [DBG] Creating refresh token
2022-01-17 23:07:37.321 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 23:07:37.395 +07:00 [DBG] Xz0+RK/0BZRmxIw75iRUk1wYaLxh7OYUgbMBuWD1P0A= not found in database
2022-01-17 23:07:37.579 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****6BF6","$type":"Token"},{"TokenType":"access_token","TokenValue":"****h6fg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000001","TimeStamp":"2022-01-17T16:07:37.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 23:07:37.587 +07:00 [DBG] Token request success.
2022-01-17 23:08:29.190 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:08:29.195 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:08:29.197 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:08:29.198 +07:00 [DBG] Start token request.
2022-01-17 23:08:29.199 +07:00 [DBG] Start client validation
2022-01-17 23:08:29.200 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:08:29.200 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:08:29.202 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:08:29.202 +07:00 [DBG] Secret id found: postman
2022-01-17 23:08:29.230 +07:00 [DBG] postman found in database: true
2022-01-17 23:08:29.230 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 23:08:29.238 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 23:08:29.238 +07:00 [DBG] Client validation success
2022-01-17 23:08:29.239 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000002","TimeStamp":"2022-01-17T16:08:29.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:08:29.241 +07:00 [DBG] Start token request validation
2022-01-17 23:08:29.241 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:08:29.247 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:08:29.257 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:08:29.262 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:08:29.273 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 23:08:29.274 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000002","TimeStamp":"2022-01-17T16:08:29.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 23:08:29.278 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 23:08:29.279 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:08:29.282 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 23:08:29.283 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 23:08:29.295 +07:00 [DBG] Creating refresh token
2022-01-17 23:08:29.295 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 23:08:29.299 +07:00 [DBG] wet+o+S2Dh1zhVjUdbxc7wy6aNGplfibN6sFlc5dfJ0= not found in database
2022-01-17 23:08:29.306 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****6DE3","$type":"Token"},{"TokenType":"access_token","TokenValue":"****PSIw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000002","TimeStamp":"2022-01-17T16:08:29.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 23:08:29.311 +07:00 [DBG] Token request success.
2022-01-17 23:08:32.292 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:08:32.313 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:08:32.314 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:08:32.315 +07:00 [DBG] Start token request.
2022-01-17 23:08:32.315 +07:00 [DBG] Start client validation
2022-01-17 23:08:32.316 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:08:32.316 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:08:32.317 +07:00 [DBG] client id without secret found
2022-01-17 23:08:32.317 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:08:32.318 +07:00 [DBG] Secret id found: PostmanWithoutSecret
2022-01-17 23:08:32.332 +07:00 [DBG] PostmanWithoutSecret found in database: true
2022-01-17 23:08:32.333 +07:00 [DBG] client configuration validation for client PostmanWithoutSecret succeeded.
2022-01-17 23:08:32.334 +07:00 [DBG] Public Client - skipping secret validation success
2022-01-17 23:08:32.335 +07:00 [DBG] Client validation success
2022-01-17 23:08:32.337 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000003","TimeStamp":"2022-01-17T16:08:32.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:08:32.339 +07:00 [DBG] Start token request validation
2022-01-17 23:08:32.339 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:08:32.342 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:08:32.346 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:08:32.348 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:08:32.358 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 23:08:32.359 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"PostmanWithoutSecret","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000003","TimeStamp":"2022-01-17T16:08:32.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 23:08:32.362 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 23:08:32.363 +07:00 [INF] Token request validation success, {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"PostmanWithoutSecret","scope":"openid profile identity.api test.api offline_access"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:08:32.366 +07:00 [DBG] Getting claims for access token for client: PostmanWithoutSecret
2022-01-17 23:08:32.367 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 23:08:32.374 +07:00 [DBG] Creating refresh token
2022-01-17 23:08:32.375 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 23:08:32.378 +07:00 [DBG] TAAP8Wtl2dKrIcXmUHBthpWOI/ed4a7eDcRtt4mvNHg= not found in database
2022-01-17 23:08:32.384 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****13D0","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HR1Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000003","TimeStamp":"2022-01-17T16:08:32.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 23:08:32.391 +07:00 [DBG] Token request success.
2022-01-17 23:08:36.531 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:08:36.534 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:08:36.535 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:08:36.536 +07:00 [DBG] Start token request.
2022-01-17 23:08:36.537 +07:00 [DBG] Start client validation
2022-01-17 23:08:36.537 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:08:36.539 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:08:36.540 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:08:36.540 +07:00 [DBG] Secret id found: postman
2022-01-17 23:08:36.557 +07:00 [DBG] postman found in database: true
2022-01-17 23:08:36.558 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 23:08:36.559 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 23:08:36.559 +07:00 [DBG] Client validation success
2022-01-17 23:08:36.560 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000004","TimeStamp":"2022-01-17T16:08:36.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:08:36.562 +07:00 [DBG] Start token request validation
2022-01-17 23:08:36.563 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:08:36.566 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:08:36.569 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:08:36.574 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:08:36.584 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 23:08:36.586 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000004","TimeStamp":"2022-01-17T16:08:36.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 23:08:36.589 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 23:08:36.590 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:08:36.594 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 23:08:36.594 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 23:08:36.602 +07:00 [DBG] Creating refresh token
2022-01-17 23:08:36.603 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 23:08:36.606 +07:00 [DBG] ww1Zt6qUBlyoQSzZjBlHn+MoTA3lzj4FONRH8AdYSkc= not found in database
2022-01-17 23:08:36.612 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ABB5","$type":"Token"},{"TokenType":"access_token","TokenValue":"****m0Wg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000004","TimeStamp":"2022-01-17T16:08:36.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 23:08:36.618 +07:00 [DBG] Token request success.
2022-01-17 23:09:24.712 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:09:24.714 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:09:24.715 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:09:24.716 +07:00 [DBG] Start token request.
2022-01-17 23:09:24.717 +07:00 [DBG] Start client validation
2022-01-17 23:09:24.717 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:09:24.718 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:09:24.719 +07:00 [DBG] client id without secret found
2022-01-17 23:09:24.719 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:09:24.720 +07:00 [DBG] Secret id found: PostmanWithoutSecret
2022-01-17 23:09:24.746 +07:00 [DBG] PostmanWithoutSecret found in database: true
2022-01-17 23:09:24.748 +07:00 [DBG] client configuration validation for client PostmanWithoutSecret succeeded.
2022-01-17 23:09:24.749 +07:00 [DBG] Public Client - skipping secret validation success
2022-01-17 23:09:24.749 +07:00 [DBG] Client validation success
2022-01-17 23:09:24.750 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000005","TimeStamp":"2022-01-17T16:09:24.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:09:24.753 +07:00 [DBG] Start token request validation
2022-01-17 23:09:24.754 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:09:24.759 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:09:24.769 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:09:24.775 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:09:24.786 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 23:09:24.787 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"PostmanWithoutSecret","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000005","TimeStamp":"2022-01-17T16:09:24.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 23:09:24.791 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 23:09:24.792 +07:00 [INF] Token request validation success, {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"PostmanWithoutSecret","scope":"openid profile identity.api test.api offline_access"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:09:24.796 +07:00 [DBG] Getting claims for access token for client: PostmanWithoutSecret
2022-01-17 23:09:24.797 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 23:09:24.805 +07:00 [DBG] Creating refresh token
2022-01-17 23:09:24.806 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 23:09:24.809 +07:00 [DBG] oiq9KjNqlufItew7eBsJ8eHrUk0Q18Fm21rLvXcGm+c= not found in database
2022-01-17 23:09:24.815 +07:00 [INF] {"ClientId":"PostmanWithoutSecret","ClientName":"Postman Client Without Secret","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3185","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qpfA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000005","TimeStamp":"2022-01-17T16:09:24.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 23:09:24.820 +07:00 [DBG] Token request success.
2022-01-17 23:09:30.001 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:09:30.003 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:09:30.004 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:09:30.005 +07:00 [DBG] Start token request.
2022-01-17 23:09:30.006 +07:00 [DBG] Start client validation
2022-01-17 23:09:30.006 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:09:30.007 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:09:30.008 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:09:30.009 +07:00 [DBG] Secret id found: postman
2022-01-17 23:09:30.029 +07:00 [DBG] postman found in database: true
2022-01-17 23:09:30.029 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 23:09:30.030 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 23:09:30.031 +07:00 [DBG] Client validation success
2022-01-17 23:09:30.031 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000006","TimeStamp":"2022-01-17T16:09:30.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:09:30.034 +07:00 [DBG] Start token request validation
2022-01-17 23:09:30.035 +07:00 [DBG] Start validation of refresh token request
2022-01-17 23:09:30.051 +07:00 [DBG] nUVMaL2FvRjmd2zYcdmL5dbXKQv4yivOdBQsMDmgyFk= found in database: true
2022-01-17 23:09:30.074 +07:00 [WRN] Rejecting refresh token because it has been consumed already.
2022-01-17 23:09:30.075 +07:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***","refresh_token":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:09:30.080 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000006","TimeStamp":"2022-01-17T16:09:30.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2022-01-17 23:09:32.510 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2022-01-17 23:09:32.511 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2022-01-17 23:09:32.512 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-01-17 23:09:32.513 +07:00 [DBG] Start token request.
2022-01-17 23:09:32.514 +07:00 [DBG] Start client validation
2022-01-17 23:09:32.514 +07:00 [DBG] Start parsing Basic Authentication secret
2022-01-17 23:09:32.515 +07:00 [DBG] Start parsing for secret in post body
2022-01-17 23:09:32.515 +07:00 [DBG] Parser found secret: PostBodySecretParser
2022-01-17 23:09:32.516 +07:00 [DBG] Secret id found: postman
2022-01-17 23:09:32.529 +07:00 [DBG] postman found in database: true
2022-01-17 23:09:32.530 +07:00 [DBG] client configuration validation for client postman succeeded.
2022-01-17 23:09:32.531 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2022-01-17 23:09:32.531 +07:00 [DBG] Client validation success
2022-01-17 23:09:32.532 +07:00 [INF] {"ClientId":"postman","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000007","TimeStamp":"2022-01-17T16:09:32.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2022-01-17 23:09:32.535 +07:00 [DBG] Start token request validation
2022-01-17 23:09:32.538 +07:00 [DBG] Start resource owner password token request validation
2022-01-17 23:09:32.541 +07:00 [DBG] Found ["profile","openid"] identity scopes in database
2022-01-17 23:09:32.543 +07:00 [DBG] Found [] API resources in database
2022-01-17 23:09:32.546 +07:00 [DBG] Found ["test.api","identity.api"] scopes in database
2022-01-17 23:09:32.556 +07:00 [INF] Credentials validated for username: minhtam0412@gmail.com
2022-01-17 23:09:32.557 +07:00 [INF] {"Username":"minhtam0412@gmail.com","Provider":null,"ProviderUserId":null,"SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","DisplayName":null,"Endpoint":"Token","ClientId":"postman","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000007","TimeStamp":"2022-01-17T16:09:32.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2022-01-17 23:09:32.560 +07:00 [DBG] Resource owner password token request validation success.
2022-01-17 23:09:32.561 +07:00 [INF] Token request validation success, {"ClientId":"postman","ClientName":"Postman Client","GrantType":"password","Scopes":"identity.api offline_access openid profile test.api","AuthorizationCode":"********","RefreshToken":"********","UserName":"minhtam0412@gmail.com","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","username":"minhtam0412@gmail.com","password":"***REDACTED***","client_id":"postman","scope":"openid profile identity.api test.api offline_access","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2022-01-17 23:09:32.565 +07:00 [DBG] Getting claims for access token for client: postman
2022-01-17 23:09:32.565 +07:00 [DBG] Getting claims for access token for subject: e26865b1-ede4-4f78-b74b-b11f7c6d85c1
2022-01-17 23:09:32.575 +07:00 [DBG] Creating refresh token
2022-01-17 23:09:32.575 +07:00 [DBG] Setting an absolute lifetime: 864000
2022-01-17 23:09:32.578 +07:00 [DBG] i5ywsoUfxXhEzPBuGY/GF7QZBhlw8c26RSQ5vJjew38= not found in database
2022-01-17 23:09:32.584 +07:00 [INF] {"ClientId":"postman","ClientName":"Postman Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"e26865b1-ede4-4f78-b74b-b11f7c6d85c1","Scopes":"identity.api offline_access openid profile test.api","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****46BA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****psfg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HMEPQDRC58J8:00000007","TimeStamp":"2022-01-17T16:09:32.0000000Z","ProcessId":28052,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2022-01-17 23:09:32.588 +07:00 [DBG] Token request success.
